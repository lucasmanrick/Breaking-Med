<link rel="stylesheet" href="css/consultaAdm.css">
<!-- Seção da tabela de dados -->
<section class="dados" id="dados">
  <h1 class="heading"> <span>Tabela de todas as Consultas</span> </h1>
  <table>
    <thead>
      <tr>
        <th>Consulta ID</th>
        <th>Data da consulta</th>
        <th>Hora da consulta</th>
        <th>Nome do Paciente</th>
        <th>Medico</th>
        <th>Especialidade Médica</th>
      </tr>
    </thead>
    <tbody id="corpo-tabela-dados">
      <!-- Os dados serão inseridos aqui pelo JavaScript -->
      <!-- <tr>
        <td>001</td>
        <td>123.456.789-10</td>
        <td>João da Silva</td>
        <td>Dermatologista</td>
        <td><button class="fas fa-trash-alt btn-excluir" onclick="excluirConsulta(1)"></button></td>
      </tr>
      <tr>
        <td>002</td>
        <td>583.421.368-10</td>
        <td>Marcos Lucas</td>
        <td>Cardiologista</td>
        <td><button class="fas fa-trash-alt btn-excluir" onclick="excluirConsulta(1)"></button></td>
      </tr> -->
    </tbody>
  </table>
</section>
<!-- Fim da seção da tabela de dados -->

<script defer>
  
  const dataUser = JSON.parse(sessionStorage.getItem('userData'))
  const token = dataUser.token
    
  fetch('/Consulta', {
    method: 'GET',
    headers: {
      'Content-Type': 'application/json',
      authorization: token
    }
  })
    .then(response => response.json())
    .then(data => {
      const tableReceiver = document.getElementById('corpo-tabela-dados')

     data.moreInfos.forEach (e => {
      tableReceiver.innerHTML += ` 
      <tr>
        <td>${e.id}</td>
        <td>${e.data}</td>
        <td>${e.hora}</td>
        <td>${e.paciente_nome}</td>
        <td>${e.funcionario_nome}</td>
        <td>${e.desc_especialidade}</td>
      </tr>`
     })

    })
    .catch(error => {
      console.error('Erro:', error);
    });

</script>
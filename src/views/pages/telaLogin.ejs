<link rel="stylesheet" href="../../../public/css/telaLogin.css">

<div class="container">
  <form id="sendForm" class="forms-container" method="post" action="" >

    <h3>Seja Bem-vindo!</h3>

    <div class="containers-inputs">
      <div class="input-container">
        <input name="login" placeholder="CPF" type="text" required id="login">
        <i class="fas fa-user"></i>
      </div>

      <div class="senha-container">
        <input name="senha" placeholder="Senha" type="password" required id="senha">
        <i class="fas fa-key"></i>
      </div>

      <a href="#" id="esqueciminhasenha">Esqueci minha senha</a>
    </div>


    <input id="submitButton" type="submit" class="submit-button">Entrar</input>

    <div class="register-link">
      <p>Não está cadastrado ? <a href="#">Cadastre-se</a> </p>
    </div>

  </form>
</div>


<script defer>
let userData;

document.getElementById('sendForm').addEventListener('submit', (e) => {
  e.preventDefault();
})

document.getElementById('submitButton').addEventListener('click', async (e) => {
  console.log('clicou')
  const login = document.getElementById('login').value
  const senha = document.getElementById('senha').value

  console.log(login)
  console.log(senha)
  console.log(typeof(login), typeof(senha))

  fetch('/login', {
    method:'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      login: login,
      senha: senha
    })
  })
    .then(response => response.json())
    .then(data => {
      console.log(data)
      userData = data
      console.log(userData)
    })
    .catch(error => {
      // Lidar com o erro
      console.error('Erro:', error);
    });
})

</script>